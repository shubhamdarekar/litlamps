{% extends "template.html" %}
{% load static %}
{% block title %}Orders{% endblock %}


{% block style %}
    <style>
        body {
            color: #566787;
            background: #f5f5f5;
            font-family: 'Varela Round', sans-serif;
            font-size: 13px;
        }

        .table-responsive {
            margin: 30px 0;
        }

        .table-wrapper {
            min-width: 1000px;
            background: #fff;
            padding: 20px 25px;
            border-radius: 3px;
            box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
        }

        .table-wrapper .btn {
            float: right;
            color: #333;
            background-color: #fff;
            border-radius: 3px;
            border: none;
            outline: none !important;
            margin-left: 10px;
        }

        .table-wrapper .btn:hover {
            color: #333;
            background: #f2f2f2;
        }

        .table-wrapper .btn.btn-primary {
            color: #fff;
            background: #03A9F4;
        }

        .table-wrapper .btn.btn-primary:hover {
            background: #03a3e7;
        }

        .table-title .btn {
            font-size: 13px;
            border: none;
        }

        .table-title .btn i {
            float: left;
            font-size: 21px;
            margin-right: 5px;
        }

        .table-title .btn span {
            float: left;
            margin-top: 2px;
        }

        .table-title {
            color: #fff;
            background: #4b5366;
            padding: 16px 25px;
            margin: -20px -25px 10px;
            border-radius: 3px 3px 0 0;
        }

        .table-title h2 {
            margin: 5px 0 0;
            font-size: 24px;
        }

        .show-entries select.form-control {
            width: 60px;
            margin: 0 5px;
        }

        .table-filter .filter-group {
            float: right;
            margin-left: 15px;
        }

        .table-filter input, .table-filter select {
            height: 34px;
            border-radius: 3px;
            border-color: #ddd;
            box-shadow: none;
        }

        .table-filter {
            padding: 5px 0 15px;
            border-bottom: 1px solid #e9e9e9;
            margin-bottom: 5px;
        }

        .table-filter .btn {
            height: 34px;
        }

        .table-filter label {
            font-weight: normal;
            margin-left: 10px;
        }

        .table-filter select, .table-filter input {
            display: inline-block;
            margin-left: 5px;
        }

        .table-filter input {
            width: 200px;
            display: inline-block;
        }

        .filter-group select.form-control {
            width: 110px;
        }

        .filter-icon {
            float: right;
            margin-top: 7px;
        }

        .filter-icon i {
            font-size: 18px;
            opacity: 0.7;
        }

        table.table tr th, table.table tr td {
            border-color: #e9e9e9;
            padding: 12px 15px;
            vertical-align: middle;
        }

        table.table tr th:first-child {
            width: 60px;
        }

        table.table tr th:last-child {
            width: 80px;
        }

        table.table-striped tbody tr:nth-of-type(odd) {
            background-color: #fcfcfc;
        }

        table.table-striped.table-hover tbody tr:hover {
            background: #f5f5f5;
        }

        table.table th i {
            font-size: 13px;
            margin: 0 5px;
            cursor: pointer;
        }

        table.table td a {
            font-weight: bold;
            color: #566787;
            display: inline-block;
            text-decoration: none;
        }

        table.table td a:hover {
            color: #2196F3;
        }

        table.table td a.view {
            width: 30px;
            height: 30px;
            color: #2196F3;
            border: 2px solid;
            border-radius: 30px;
            text-align: center;
        }

        table.table td a.view i {
            font-size: 22px;
            margin: 2px 0 0 1px;
        }

        table.table .avatar {
            border-radius: 50%;
            vertical-align: middle;
            margin-right: 10px;
            width: 60px;
            height: 60px;
        }
        .avatar{
            vertical-align: middle;
            margin: 20px;
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-width: 2px;
            border-color: black;
        }

        .status {
            font-size: 30px;
            margin: 2px 2px 0 0;
            display: inline-block;
            vertical-align: middle;
            line-height: 10px;
        }

        .text-success {
            color: #10c469;
        }

        .text-info {
            color: #62c9e8;
        }

        .text-warning {
            color: #FFC107;
        }

        .text-danger {
            color: #ff5b5b;
        }

        .pagination {
            float: right;
            margin: 0 0 5px;
        }

        .pagination li a {
            border: none;
            font-size: 13px;
            min-width: 30px;
            min-height: 30px;
            color: #999;
            margin: 0 2px;
            line-height: 30px;
            border-radius: 2px !important;
            text-align: center;
            padding: 0 6px;
        }

        .pagination li a:hover {
            color: #666;
        }

        .pagination li.active a {
            background: #03A9F4;
        }

        .pagination li.active a:hover {
            background: #0397d6;
        }

        .pagination li.disabled i {
            color: #ccc;
        }

        .pagination li i {
            font-size: 16px;
            padding-top: 6px
        }

        .hint-text {
            float: left;
            margin-top: 10px;
            font-size: 13px;
        }
    </style>
{% endblock %}

{% block content %}


    <div class="container-xl">
    <br><br><br><br>
    {#        <div class="table-responsive">#}
    {#            <div class="table-wrapper">#}
    {#                <table class="table table-striped table-hover">#}
    {#                    <thead>#}
    {#                    <tr>#}
    {#                        <th>#</th>#}
    {#                        <th>Product</th>#}
    {#                        <th>Color</th>#}
    {#                        <th>Quantity</th>#}
    {#                        <th>Order Date</th>#}
    {#                        <th>Status</th>#}
    {#                        <th>Net Amount</th>#}
    {#                        <th>Address</th>#}
    {#                    </tr>#}
    {#                    </thead>#}
    {#                    <tbody>#}
    {#                    {% for order_item in orders %}#}
    {#                        <tr>#}
    {#                            <td>1</td>#}
    {#                            <td><a href="/product/?id={{ order_item.product.id }}"><img#}
    {#                                    src="{{ order_item.product.image_path }}" class="avatar"#}
    {#                                    alt="Avatar">{{ order_item.product.product_name }}</a></td>#}
    {#                            {% if order_item.color == 'red' %}#}
    {#                                <td><img src="{% static 'images/red.jpeg' %}" width="30px" height="30px"#}
    {#                                         style="border-radius: 15px"><br><small class="text-muted">Red</small></td>#}
    {#                            {% elif order_item.color == 'wooden' %}#}
    {#                                <td><img src="{% static 'images/wooden.jpeg' %}" width="30px" height="30px"#}
    {#                                         style="border-radius: 15px"></br><small class="text-muted">Wooden</small>#}
    {#                                </td>#}
    {#                            {% elif order_item.color == 'black' %}#}
    {#                                <td><img src="{% static 'images/black.jpeg' %}" width="30px" height="30px"#}
    {#                                         style="border-radius: 15px"></br><small class="text-muted">Black</small>#}
    {#                                </td>#}
    {#                            {% endif %}#}
    {#                            <td>{{ order_item.quantity }}</td>#}
    {#                            <td>{{ order_item.order.time }}</td>#}
    {#                            {% if order_item.order.payment == 1 %}#}
    {#                                <td><span class="status text-success">&bull;</span> Payment Done</td>#}
    {#                            {% elif order_item.order.payment == 0 %}#}
    {#                                <td><span class="status text-danger">&bull;</span> Payment Failed</td>#}
    {#                            {% endif %}#}
    {#                            <td>₹{{ order_item.total }}</td>#}
    {#                            <td>{{ order_item.order.address }}</td>#}
    {#                        </tr>#}
    {#                    {% endfor %}#}
    {#                    </tbody>#}
    {#                </table>#}
    {#            </div>#}
    {#        </div>#}
    {#    </div>#}

    {% for order_item in orders %}
        <div class="container my-3" style="border-style: solid;
  border-width: 2px;">
            <div class="row border" >
                <div class="col-2">
                    <strong>Order Placed</strong><br>{{ order_item.order.time }}
                </div>
                <div class="col-1">
                    <strong>Total</strong><br>₹{{ order_item.total }}
                </div>
                <div class="col">
                    <div class="float-right"><strong>ORDER #</strong>&nbsp;&nbsp;{{ order_item.order.razorpay_order_id }}</div>
                </div>
            </div>
            <div class="row border">
                <div class="col-3">
                    <a href="/product/?id={{ order_item.product.id }}"><img
                            src="{{ order_item.product.image_path }}" class="avatar"
                            alt="Avatar"></a>
                </div>
                <div class="col-2">
                    <h6 class="mb-0 mt-2" style="color: black; text-decoration:none"><a href="/product/?id={{ order_item.product.id }}">{{ order_item.product.product_name }}</a></h6>
                    <br>₹<a>{{ order_item.product.product_price_rupees }}</a>
                    <form action="/buy_now/" method="post" id="buy_now">
                        {% csrf_token %}
                        <input type="text" name="id" hidden value="{{ order_item.product.id }}">
                        <input id="colorBuy{{ order_item.product.id }}" type="text" name="color" hidden
                               value="{{ order_item.color }}">
                        <button class="order" type="submit">
                            <i class="fa fa-credit-card sm-font"> ORDER AGAIN </i>
                        </button>
                    </form>
                </div>
                <div class="col-1">
                    {% if order_item.color == 'red' %}
                        <img src="{% static 'images/red.jpeg' %}" width="30px" height="30px"
                             style="border-radius: 15px">
                    {% elif order_item.color == 'wooden' %}
                        <img src="{% static 'images/wooden.jpeg' %}" width="30px" height="30px"
                             style="border-radius: 15px"></br>
                    {% elif order_item.color == 'black' %}
                        <img src="{% static 'images/black.jpeg' %}" width="30px" height="30px"
                             style="border-radius: 15px">
                    {% endif %}
                </div>
                <div class="col-3">
                    <form action="/submitReview/" method="post" id="review">
                        {% csrf_token %}
                        <input type="text" name="id" hidden value="{{ order_item.product.id }}">
                        <input id="color" type="text" name="color" hidden
                               value="{{ order_item.color }}">
                        <textarea name="reviewField" form="review" required>

                        </textarea>
                        <button class="order" type="submit">
                            <i class="fa fa-street-view sm-font"> Submit review </i>
                        </button>
                    </form>
                </div>
            </div>

        </div>
    {% endfor %}
{% endblock %}

{% block script %}
    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}